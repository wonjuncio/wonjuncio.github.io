---
layout: default
---

{% include lang.html %}

<article class="px-1">
  {% assign tab_key = page.title | downcase %}
  {% assign title = site.data.locales[lang].tabs[tab_key] | default: page.title %}
  <h1 class="dynamic-title">
    {{ title }}
  </h1>
  <div class="content">
    <div class="posts-page">
      <!-- ================================ -->
      <!-- 1. Primary Control - Search -->
      <!-- ================================ -->
  <div class="posts-search-wrapper">
    <i class="fas fa-search"></i>
    <input type="text" id="posts-search" placeholder="Search posts...">
  </div>

  <!-- ================================ -->
  <!-- 3. Secondary Control - Category Filter (Primary Categories Only) -->
  <!-- ================================ -->
  {% comment %} Extract unique primary categories from all posts {% endcomment %}
  {% assign primary_cats = "" | split: "" %}
  {% for post in site.posts %}
    {% if post.hidden != true and post.categories.size > 0 %}
      {% assign first_cat = post.categories | first %}
      {% assign primary_cats = primary_cats | push: first_cat %}
    {% endif %}
  {% endfor %}
  {% assign primary_cats = primary_cats | uniq | sort %}
  
  <div class="posts-category-filter">
    <div class="category-list" id="category-list">
      <button class="category-item active" data-category="all">All</button>
      {% assign cat_count = 0 %}
      {% for category in primary_cats %}
        {% assign cat_count = cat_count | plus: 1 %}
        <button class="category-item{% if cat_count > 5 %} hidden-category{% endif %}" data-category="{{ category | downcase }}">
          {{ category }}
        </button>
      {% endfor %}
    </div>
    {% if primary_cats.size > 5 %}
      <button class="category-more" id="category-more-btn">
        More <i class="fas fa-chevron-down"></i>
      </button>
    {% endif %}
  </div>

  <!-- ================================ -->
  <!-- 4. Content - Post List -->
  <!-- ================================ -->
  <div class="posts-list" id="posts-list">
    {% assign visible_posts = site.posts | where_exp: 'post', 'post.hidden != true' %}
    {% for post in visible_posts %}
      <a href="{{ post.url | relative_url }}" class="posts-card" 
         data-title="{{ post.title | downcase }}"
         data-primary-category="{{ post.categories | first | downcase }}"
         data-tags="{% for tag in post.tags %}{{ tag | downcase }} {% endfor %}">
        <div class="posts-card-header">
          <h3 class="posts-card-title">{{ post.title }}</h3>
          <span class="posts-card-date">{{ post.date | date: "%b %d, %Y" }}</span>
        </div>
        
        <p class="posts-card-excerpt">
          {{ post.excerpt | strip_html | truncate: 150 }}
        </p>
        
        <div class="posts-card-meta">
          {% for category in post.categories %}
            <span class="posts-card-category">{{ category }}</span>
          {% endfor %}
          {% for tag in post.tags limit: 3 %}
            <span class="posts-card-tag">{{ tag }}</span>
          {% endfor %}
        </div>
      </a>
    {% endfor %}
  </div>

  <!-- ================================ -->
  <!-- 5. Pagination -->
  <!-- ================================ -->
  <div class="posts-pagination" id="posts-pagination"></div>

  <!-- ================================ -->
  <!-- Archive (Collapsed) -->
  <!-- ================================ -->
  <div class="posts-archive">
    <div class="section-header">
      <h2>Archive</h2>
    </div>
    
    {% assign posts_by_year = visible_posts | group_by_exp: "post", "post.date | date: '%Y'" %}
    {% for year in posts_by_year %}
      <div class="archive-year">
        <div class="archive-year-header collapsed" data-year="{{ year.name }}">
          <h3>{{ year.name }}</h3>
          <span>({{ year.items | size }} posts)</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="archive-year-list collapsed" id="archive-{{ year.name }}">
          {% for post in year.items %}
            <a href="{{ post.url | relative_url }}" class="archive-item">
              <span class="archive-item-date">{{ post.date | date: "%m-%d" }}</span>
              <span class="archive-item-title">{{ post.title }}</span>
            </a>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>
    </div>
  </div>
</article>

<script src="/assets/js/posts-filter.js"></script>
